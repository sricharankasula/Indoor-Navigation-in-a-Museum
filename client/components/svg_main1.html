<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>map</title>
  </head>
  <body>
    <?xml version="1.0" encoding="UTF-8" standalone="no" ?>
    <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
    <svg
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      version="1.1"
      width="1080"
      height="1080"
      viewBox="0 0 1080 1080"
      xml:space="preserve"
    >
      <desc>Created with Fabric.js 5.2.4</desc>
      <defs></defs>
      <g
        transform="matrix(1 0 0 1 540 540)"
        id="38ace6ee-4d88-4a33-ac1a-4edd402998af"
      >
        <rect
          style="
            stroke: none;
            stroke-width: 1;
            stroke-dasharray: none;
            stroke-linecap: butt;
            stroke-dashoffset: 0;
            stroke-linejoin: miter;
            stroke-miterlimit: 4;
            fill: rgb(255, 255, 255);
            fill-rule: nonzero;
            opacity: 1;
            visibility: hidden;
          "
          vector-effect="non-scaling-stroke"
          x="-540"
          y="-540"
          rx="0"
          ry="0"
          width="1080"
          height="1080"
        />
      </g>
      <g
        transform="matrix(1 0 0 1 540 540)"
        id="0b7d97e6-394c-410d-8d01-fe1127495526"
      ></g>
      <g
        transform="matrix(2.5 0 0 2.5 592.33 214.65)"
        id="B"
        onclick="clicked(event)"
      >
        <circle
          style="
            cursor: pointer;
            stroke: rgb(0, 0, 0);
            stroke-width: 0;
            stroke-dasharray: none;
            stroke-linecap: butt;
            stroke-dashoffset: 0;
            stroke-linejoin: miter;
            stroke-miterlimit: 4;
            fill: rgb(104, 163, 109);
            fill-rule: nonzero;
            opacity: 1;
          "
          vector-effect="non-scaling-stroke"
          cx="0"
          cy="0"
          r="35"
        />
      </g>
      <g
        transform="matrix(2.16 0 0 2.16 197.96 365.8)"
        id="A"
        onclick="clicked(event)"
      >
        <circle
          style="
            cursor: pointer;
            stroke: rgb(0, 0, 0);
            stroke-width: 0;
            stroke-dasharray: none;
            stroke-linecap: butt;
            stroke-dashoffset: 0;
            stroke-linejoin: miter;
            stroke-miterlimit: 4;
            fill: rgb(193, 114, 114);
            fill-rule: nonzero;
            opacity: 1;
          "
          vector-effect="non-scaling-stroke"
          cx="0"
          cy="0"
          r="35"
        />
      </g>
      <g
        transform="matrix(2.05 0 0 2.05 912.64 512.06)"
        id="F"
        onclick="clicked(event)"
      >
        <circle
          style="
            cursor: pointer;
            stroke: rgb(0, 0, 0);
            stroke-width: 0;
            stroke-dasharray: none;
            stroke-linecap: butt;
            stroke-dashoffset: 0;
            stroke-linejoin: miter;
            stroke-miterlimit: 4;
            fill: rgb(86, 131, 172);
            fill-rule: nonzero;
            opacity: 1;
          "
          vector-effect="non-scaling-stroke"
          cx="0"
          cy="0"
          r="35"
        />
      </g>
      <g
        transform="matrix(1.84 0 0 1.84 663.38 801.53)"
        id="E"
        onclick="clicked(event)"
      >
        <circle
          style="
            cursor: pointer;
            stroke: rgb(0, 0, 0);
            stroke-width: 0;
            stroke-dasharray: none;
            stroke-linecap: butt;
            stroke-dashoffset: 0;
            stroke-linejoin: miter;
            stroke-miterlimit: 4;
            fill: rgb(150, 79, 125);
            fill-rule: nonzero;
            opacity: 1;
          "
          vector-effect="non-scaling-stroke"
          cx="0"
          cy="0"
          r="35"
        />
      </g>
      <g
        transform="matrix(2.35 0 0 2.35 291.89 790.34)"
        id="D"
        onclick="clicked(event)"
      >
        <circle
          style="
            cursor: pointer;
            stroke: rgb(0, 0, 0);
            stroke-width: 0;
            stroke-dasharray: none;
            stroke-linecap: butt;
            stroke-dashoffset: 0;
            stroke-linejoin: miter;
            stroke-miterlimit: 4;
            fill: rgb(164, 165, 93);
            fill-rule: nonzero;
            opacity: 1;
          "
          vector-effect="non-scaling-stroke"
          cx="0"
          cy="0"
          r="35"
        />
      </g>
      <g
        transform="matrix(2.14 0 0 2.14 518.64 556.69)"
        id="C"
        onclick="clicked(event)"
      >
        <rect
          style="
            cursor: pointer;
            stroke: rgb(0, 0, 0);
            stroke-width: 0;
            stroke-dasharray: none;
            stroke-linecap: butt;
            stroke-dashoffset: 0;
            stroke-linejoin: miter;
            stroke-miterlimit: 4;
            fill: rgb(92, 79, 155);
            fill-rule: nonzero;
            opacity: 1;
          "
          vector-effect="non-scaling-stroke"
          x="-33.0835"
          y="-33.0835"
          rx="0"
          ry="0"
          width="66.167"
          height="66.167"
        />
      </g>
      <g
        transform="matrix(1 0 0 1 198.61 362.39)"
        
        id="cc9add33-2da0-465c-b23e-82201025ac0c"
      >
        <text
          xml:space="preserve"
          font-family="Lato"
          font-size="40"
          font-style="normal"
          font-weight="400"
          style="
            stroke: none;
            stroke-width: 1;
            stroke-dasharray: none;
            stroke-linecap: butt;
            stroke-dashoffset: 0;
            stroke-linejoin: miter;
            stroke-miterlimit: 4;
            fill: rgb(0, 0, 0);
            fill-rule: nonzero;
            opacity: 1;
            white-space: pre;
          "
        >
          <tspan x="-13.6" y="12.57">A</tspan>
        </text>
      </g>
      <g transform="matrix(1 0 0 1 667.2 804.36)" >
        <text
          xml:space="preserve"
          font-family="Lato"
          font-size="40"
          font-style="normal"
          font-weight="400"
          style="
            stroke: none;
            stroke-width: 1;
            stroke-dasharray: none;
            stroke-linecap: butt;
            stroke-dashoffset: 0;
            stroke-linejoin: miter;
            stroke-miterlimit: 4;
            fill: rgb(0, 0, 0);
            fill-rule: nonzero;
            opacity: 1;
            white-space: pre;
          "
        >
          <tspan x="-11.62" y="12.57">E</tspan>
        </text>
      </g>
      <g transform="matrix(1 0 0 1 288.22 791.84)" >
        <text
          xml:space="preserve"
          font-family="Lato"
          font-size="40"
          font-style="normal"
          font-weight="400"
          style="
            stroke: none;
            stroke-width: 1;
            stroke-dasharray: none;
            stroke-linecap: butt;
            stroke-dashoffset: 0;
            stroke-linejoin: miter;
            stroke-miterlimit: 4;
            fill: rgb(0, 0, 0);
            fill-rule: nonzero;
            opacity: 1;
            white-space: pre;
          "
        >
          <tspan x="-15.06" y="12.57">D</tspan>
        </text>
      </g>
      <g transform="matrix(1 0 0 1 521.37 540)" >
        <text
          xml:space="preserve"
          font-family="Lato"
          font-size="40"
          font-style="normal"
          font-weight="400"
          style="
            stroke: none;
            stroke-width: 1;
            stroke-dasharray: none;
            stroke-linecap: butt;
            stroke-dashoffset: 0;
            stroke-linejoin: miter;
            stroke-miterlimit: 4;
            fill: rgb(0, 0, 0);
            fill-rule: nonzero;
            opacity: 1;
            white-space: pre;
          "
        >
          <tspan x="-13.7" y="12.57">C</tspan>
        </text>
      </g>
      <g transform="matrix(1 0 0 1 582.55 216.09)" >
        <text
          xml:space="preserve"
          font-family="Lato"
          font-size="40"
          font-style="normal"
          font-weight="400"
          style="
            stroke: none;
            stroke-width: 1;
            stroke-dasharray: none;
            stroke-linecap: butt;
            stroke-dashoffset: 0;
            stroke-linejoin: miter;
            stroke-miterlimit: 4;
            fill: rgb(0, 0, 0);
            fill-rule: nonzero;
            opacity: 1;
            white-space: pre;
          "
        >
          <tspan x="-12.94" y="12.57">B</tspan>
        </text>
      </g>
      <g transform="matrix(1 0 0 1 908.54 515.46)" >
        <text
          xml:space="preserve"
          font-family="Lato"
          font-size="40"
          font-style="normal"
          font-weight="400"
          style="
            stroke: none;
            stroke-width: 1;
            stroke-dasharray: none;
            stroke-linecap: butt;
            stroke-dashoffset: 0;
            stroke-linejoin: miter;
            stroke-miterlimit: 4;
            fill: rgb(0, 0, 0);
            fill-rule: nonzero;
            opacity: 1;
            white-space: pre;
          "
        >
          <tspan x="-11.32" y="12.57">F</tspan>
        </text>
      </g>
      <g transform="matrix(2.76 -0.83 0.29 0.96 391.23 288.59)">
        <path
          id="AB"
          style="
            stroke: rgb(0, 0, 0);
            stroke-width: 0;
            stroke-dasharray: none;
            stroke-linecap: butt;
            stroke-dashoffset: 0;
            stroke-linejoin: miter;
            stroke-miterlimit: 4;
            fill: rgb(101, 101, 101);
            fill-rule: nonzero;
            opacity: 1;
          "
          vector-effect="non-scaling-stroke"
          transform=" translate(-50, -50)"
          d="M 94.75 50 C 94.75 56.213 89.514 61.25 83.054 61.25 L 16.946 61.25 C 10.486 61.25 5.25 56.213 5.25 50 L 5.25 50 C 5.25 43.787 10.486 38.75 16.945999999999998 38.75 L 83.053 38.75 C 89.514 38.75 94.75 43.787 94.75 50 L 94.75 50 z"
          stroke-linecap="round"
        />
      </g>
      <g transform="matrix(1.63 -1.4 0.65 0.76 390.28 671.59)">
        <path
          id="CD"
          style="
            stroke: rgb(0, 0, 0);
            stroke-width: 0;
            stroke-dasharray: none;
            stroke-linecap: butt;
            stroke-dashoffset: 0;
            stroke-linejoin: miter;
            stroke-miterlimit: 4;
            fill: rgb(101, 101, 101);
            fill-rule: nonzero;
            opacity: 1;
          "
          vector-effect="non-scaling-stroke"
          transform=" translate(-50, -50)"
          d="M 94.75 50 C 94.75 56.213 89.514 61.25 83.054 61.25 L 16.946 61.25 C 10.486 61.25 5.25 56.213 5.25 50 L 5.25 50 C 5.25 43.787 10.486 38.75 16.945999999999998 38.75 L 83.053 38.75 C 89.514 38.75 94.75 43.787 94.75 50 L 94.75 50 z"
          stroke-linecap="round"
        />
      </g>
      <g transform="matrix(2.04 -2.04 0.71 0.71 787.76 666.92)" >
        <path
        id="EF"
          style="
            stroke: rgb(0, 0, 0);
            stroke-width: 0;
            stroke-dasharray: none;
            stroke-linecap: butt;
            stroke-dashoffset: 0;
            stroke-linejoin: miter;
            stroke-miterlimit: 4;
            fill: rgb(101, 101, 101);
            fill-rule: nonzero;
            opacity: 1;
          "
          vector-effect="non-scaling-stroke"
          transform=" translate(-50, -50)"
          d="M 94.75 50 C 94.75 56.213 89.514 61.25 83.054 61.25 L 16.946 61.25 C 10.486 61.25 5.25 56.213 5.25 50 L 5.25 50 C 5.25 43.787 10.486 38.75 16.945999999999998 38.75 L 83.053 38.75 C 89.514 38.75 94.75 43.787 94.75 50 L 94.75 50 z"
          stroke-linecap="round"
        />
      </g>

      <g transform="matrix(0.69 2.99 -0.97 0.22 238.98 570.91)" >
        <path
        id="AD"
          style="
            stroke: rgb(0, 0, 0);
            stroke-width: 0;
            stroke-dasharray: none;
            stroke-linecap: butt;
            stroke-dashoffset: 0;
            stroke-linejoin: miter;
            stroke-miterlimit: 4;
            fill: rgb(101, 101, 101);
            fill-rule: nonzero;
            opacity: 1;
          "
          vector-effect="non-scaling-stroke"
          transform=" translate(-50, -50)"
          d="M 94.75 50 C 94.75 56.213 89.514 61.25 83.054 61.25 L 16.946 61.25 C 10.486 61.25 5.25 56.213 5.25 50 L 5.25 50 C 5.25 43.787 10.486 38.75 16.945999999999998 38.75 L 83.053 38.75 C 89.514 38.75 94.75 43.787 94.75 50 L 94.75 50 z"
          stroke-linecap="round"
        />
      </g>
      <g transform="matrix(1.95 2.37 -0.52 0.43 762.03 378.41)" >
        <path
        id="BF"
          style="
            stroke: rgb(0, 0, 0);
            stroke-width: 0;
            stroke-dasharray: none;
            stroke-linecap: butt;
            stroke-dashoffset: 0;
            stroke-linejoin: miter;
            stroke-miterlimit: 4;
            fill: rgb(101, 101, 101);
            fill-rule: nonzero;
            opacity: 1;
          "
          vector-effect="non-scaling-stroke"
          transform=" translate(-50, -50)"
          d="M 94.75 50 C 94.75 56.213 89.514 61.25 83.054 61.25 L 16.946 61.25 C 10.486 61.25 5.25 56.213 5.25 50 L 5.25 50 C 5.25 43.787 10.486 38.75 16.945999999999998 38.75 L 83.053 38.75 C 89.514 38.75 94.75 43.787 94.75 50 L 94.75 50 z"
          stroke-linecap="round"
        />
      </g>
      <g transform="matrix(-2.88 0 0 -1 488.62 801.81)">
        <path
          id="DE"
          style="
            stroke: rgb(0, 0, 0);
            stroke-width: 0;
            stroke-dasharray: none;
            stroke-linecap: butt;
            stroke-dashoffset: 0;
            stroke-linejoin: miter;
            stroke-miterlimit: 4;
            fill: rgb(101, 101, 101);
            fill-rule: nonzero;
            opacity: 1;
          "
          vector-effect="non-scaling-stroke"
          transform=" translate(-50, -50)"
          d="M 94.75 50 C 94.75 56.213 89.514 61.25 83.054 61.25 L 16.946 61.25 C 10.486 61.25 5.25 56.213 5.25 50 L 5.25 50 C 5.25 43.787 10.486 38.75 16.945999999999998 38.75 L 83.053 38.75 C 89.514 38.75 94.75 43.787 94.75 50 L 94.75 50 z"
          stroke-linecap="round"
        />
      </g>
      <g transform="matrix(0.69 -2.15 0.95 0.31 566.04 398.37)">
        <path
          id="BC"
          style="
            stroke: rgb(0, 0, 0);
            stroke-width: 0;
            stroke-dasharray: none;
            stroke-linecap: butt;
            stroke-dashoffset: 0;
            stroke-linejoin: miter;
            stroke-miterlimit: 4;
            fill: rgb(101, 101, 101);
            fill-rule: nonzero;
            opacity: 1;
          "
          vector-effect="non-scaling-stroke"
          transform=" translate(-50, -50)"
          d="M 94.75 50 C 94.75 56.213 89.514 61.25 83.054 61.25 L 16.946 61.25 C 10.486 61.25 5.25 56.213 5.25 50 L 5.25 50 C 5.25 43.787 10.486 38.75 16.945999999999998 38.75 L 83.053 38.75 C 89.514 38.75 94.75 43.787 94.75 50 L 94.75 50 z"
          stroke-linecap="round"
        />
      </g>
    </svg>
    <img
      src='../assets/source.png'
      id="srcimg"
      style="position: absolute; top: 0px; left: 0px"
    />
    <img
      src='../assets/dest.png'
      id="destimg"
      style="position: absolute; top: 0px; left: 0px"
    />
    <!-- <button onclick="predict()">predict</button> -->
    <center>
      <button onclick="submit()" style="padding: 20px;border-radius: 20px;background-color: bisque;height:100px;width: 200px;margin-left: 450px;">Get Route</button>
      <button onclick="window.location.reload()"style="padding: 20px;border-radius: 20px;background-color: bisque;height:100px;width:200px;margin-left:450px;" >Change Source</button>
    </center>
    <script>
      var root = "http://127.0.0.1:5500"

      var sourceselect = false;
      let source;
      let destination;
      document.getElementById("srcimg").style.display = "none";
      document.getElementById("destimg").style.display = "none";
      let arr;
      let refresh = ["AB" , "AD" , "BC" , "BF" , "CD" , "DE" , "EF" ]

      function clicked(event) {
        event.preventDefault();

        console.log(event, event.clientY);
        if (!sourceselect || source == event.currentTarget.id) {
          source = event.currentTarget.id;
          sourceselect = true;
          document.getElementById("srcimg").style.display = "block";
          document.getElementById("srcimg").style.top = event.layerY + "px";
          document.getElementById("srcimg").style.left = event.layerX + "px";
        } else {
          destination = event.currentTarget.id;
          document.getElementById("destimg").style.display = "block";
          document.getElementById("destimg").style.top = event.layerY + "px";
          document.getElementById("destimg").style.left = event.layerX + "px";
        }
        console.log(source, destination, sourceselect);
      }

      function predict() {
        arr.map((ele) => {
          console.log(ele, document.getElementById(ele).style.fill);
          document.getElementById(ele).style.fill = "green";
          // document.getElementById(ele).style.fill = "#fff";
        });
      }
      function submit(){
        refresh.map((ele) => {
          document.getElementById(ele).style.fill = "rgb(101 , 101 ,101)";
        })
        if(!source || !destination)
        {
          alert("You havent selected Source or Destination")
          return;
        }
        else{
          fetch(root + '/path',{
            method: "POST",
            body:JSON.stringify(
              {
                source:source,
                destination:destination,
              }
            ),
            headers:{"Content-type":'application/json'}
          }).then((Resp)=>Resp.json()).then((Res)=>{
            console.log(Res.ans);
            arr=Res.ans;
            predict();
          })
        }
      };
    </script>
  </body>
</html>